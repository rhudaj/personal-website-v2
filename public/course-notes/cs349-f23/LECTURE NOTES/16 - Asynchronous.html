<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>16 - Asynchronous</title><link rel="stylesheet" type="text/css" href="/course-notes/notion_styles.css"/></head><body><article id="992c5953-617c-4ba3-a228-c0fc51367430" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">üìì</span></div><h1 class="page-title">16 - Asynchronous</h1><p class="page-description"></p></header><div class="page-body"><p id="83a982e4-7c0f-4b48-af7a-fb54df20b436" class=""><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>Responsive UI </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><ul id="0703ab94-edc5-4f52-830b-cc805279c22e" class="bulleted-list"><li style="list-style-type:disc">not about layout</li></ul><ul id="65a9916b-b62b-4827-b510-3641f4ea9f84" class="bulleted-list"><li style="list-style-type:disc">delivers feedback in timely manner</li></ul><ul id="1948c7bd-4812-4bde-9f95-02eddbc19e61" class="bulleted-list"><li style="list-style-type:disc">2  Ways<ul id="0012bdf1-ca4b-44fa-adf4-2e9c15f037f4" class="bulleted-list"><li style="list-style-type:circle">Improve <strong>performance (make the backend faster) </strong></li></ul><ul id="179d1661-6b68-4da2-b765-5c49fd256ddf" class="bulleted-list"><li style="list-style-type:circle"><strong>Responsiveness</strong><ul id="e2d7331e-c500-4208-891d-7cb86cc4c69e" class="bulleted-list"><li style="list-style-type:square">improve feedback to meet expectations (same speed)</li></ul><ul id="72444ac3-2f68-4ebc-914a-3f39b42f5c34" class="bulleted-list"><li style="list-style-type:square">most important factor in user satisfaction</li></ul></li></ul></li></ul><h2 id="3856388c-76c5-4387-83a7-7507b0ac1562" class="">Responsiveness </h2><p id="3cfc9a8f-2ba2-4d31-9f7b-15804c16ffad" class="">Factors of <strong>responsiveness</strong></p><ul id="411db4ff-616e-4ec6-aa2b-cb43d90150b4" class="bulleted-list"><li style="list-style-type:disc"><strong>User Expectations: </strong>how quick you think a task should be done</li></ul><ul id="a8cbd587-a096-43a8-b1e5-c3f829322ea0" class="bulleted-list"><li style="list-style-type:disc">Application and Interface design (feedback)</li></ul><hr id="2dd4112e-ef13-4afc-a5ce-457e1d4c7108"/><p id="409222ce-6655-40be-91e1-79f720256d91" class=""><strong><strong><strong>Perceived Time </strong></strong></strong></p><p id="ce723c68-d7df-4cea-829d-28b383ed1e10" class="">minimum time to detect a change: <strong><strong><strong><strong><strong>10ms </strong></strong></strong></strong></strong></p><ul id="14aba640-e6fe-4425-9284-61be7f6ad2bb" class="bulleted-list"><li style="list-style-type:disc">input latency should be less than this</li></ul><p id="82f5a9ff-3a2d-40a6-a89c-1df1f105d759" class="">maximum interval between cause-effect events: <strong><strong><strong><strong><strong><strong>140ms </strong></strong></strong></strong></strong></strong></p><ul id="d41a4862-3f2e-4cb8-80d8-2067e33326b9" class="bulleted-list"><li style="list-style-type:disc">anything more is perceived as slow </li></ul><p id="6dc0197e-8538-40cc-959f-377f7f665577" class="">time to prepare for a conscious cognitive task: <strong><strong><strong><strong>10s </strong></strong></strong></strong></p><ul id="141c978b-d94a-4241-9c50-09a29677cdab" class="bulleted-list"><li style="list-style-type:disc">ie: word document loading </li></ul><ul id="811388ee-84e1-4922-81f0-6b41da86a4c4" class="bulleted-list"><li style="list-style-type:disc">you could display an image of the last save while loading </li></ul><hr id="d55e5712-73dd-4aad-a335-135b989533b5"/><p id="3cbca186-9d45-4bd7-b1a5-8a4681d55e46" class="">We expect higher latency for something we are closer to: </p><ul id="e968ced1-3d22-4221-ac45-6bb0af3c9634" class="bulleted-list"><li style="list-style-type:disc"><strong>dragging &gt; tapping &gt; indirect </strong></li></ul><figure id="2bff2fb1-7931-47db-ae37-3930dab6aa41" class="image"><a href="16%20-%20Asynchronous/Screen_Shot_2023-11-26_at_15.28.01.png"><img style="width:240px" src="16%20-%20Asynchronous/Screen_Shot_2023-11-26_at_15.28.01.png"/></a></figure><hr id="36e457ed-9ec8-45c1-9011-308689d87cb1"/><p id="6d8e26d1-1ecd-4f3a-a5d5-8d1d339bc316" class=""><strong>Slow Performance ‚Üí keep UI responsive </strong></p><ul id="9904cada-9024-457e-b616-e9d247977422" class="bulleted-list"><li style="list-style-type:disc">Progress feedback </li></ul><ul id="28e6bdf9-8e5f-4fd1-9089-dfde5697df74" class="bulleted-list"><li style="list-style-type:disc">confirm user actions </li></ul><ul id="28fba680-261c-4ec2-bc1f-63b6c05c4106" class="bulleted-list"><li style="list-style-type:disc">let them perform other tasks</li></ul><ul id="501745e2-c629-4818-b226-4ca59991a8cd" class="bulleted-list"><li style="list-style-type:disc">anticipate common requests (fetch data below scroll view)</li></ul><ul id="6981e8a4-305f-4bc1-9b1d-9abaa00651f7" class="bulleted-list"><li style="list-style-type:disc">allow task to be paused/cancelled </li></ul><hr id="c06204c7-b12c-4ae9-87b3-e26f084bc4a0"/><p id="89341f76-a652-4ba0-9c97-32aa0dda78dd" class="">For operations more than 1 s </p><ol type="1" id="985986d9-c565-4e4b-a2a1-7a56e2a5d97e" class="numbered-list" start="1"><li><mark class="highlight-red"><strong>display busy/progress bar </strong></mark></li></ol><ul id="c5d0d5f0-5e4a-4ea8-ba0b-c08e85d9f7ab" class="bulleted-list"><li style="list-style-type:disc">show work remaining, not work completed </li></ul><ol type="1" id="554d90ad-8686-439e-bbfa-564a03719868" class="numbered-list" start="2"><li><mark class="highlight-orange"><strong>Skeleton screen </strong></mark>(get a preview of what the page will look like). Helps people adjust for what will appear. </li></ol><hr id="feed52d2-4a92-4f38-a16e-be650e5395e0"/><p id="91695374-e3e4-4205-b765-b6a021f0c273" class=""><mark class="highlight-red"><strong>Progressive Loading </strong></mark></p><ul id="0f3e75d4-f74b-4dc5-bcbb-2efd0144b645" class="bulleted-list"><li style="list-style-type:disc">for loading data: start as low resolution, then work up to high resolution </li></ul><p id="1216941b-b657-4485-97e9-94b666d96d79" class=""><mark class="highlight-red"><strong>Predicting Next Operation </strong></mark></p><ul id="1f185ccc-d474-4821-a94e-f883bb2dc48a" class="bulleted-list"><li style="list-style-type:disc">anticipate what people will do (quick if your right) </li></ul><ul id="83d2034d-c39d-4328-b5e2-c7f9d6f3976a" class="bulleted-list"><li style="list-style-type:disc">eg: pre-downloading linked pages to current one </li></ul><p id="699fec68-4579-4b74-868a-16fd19a07d0d" class=""><mark class="highlight-red"><strong>Graceful Degradation of Feedback </strong></mark></p><ul id="e19b111a-0e4f-4788-8283-50d5d1ef6b2d" class="bulleted-list"><li style="list-style-type:disc">simplify feedback </li></ul><ul id="b60295bd-f218-4b19-9b95-30aafa5a44c7" class="bulleted-list"><li style="list-style-type:disc">eg: window manager renders rectangle outline for window drag. Only render when done dragging </li></ul><ul id="2b2bd653-fbf0-4fc7-a6c8-d27e2b3ddde8" class="bulleted-list"><li style="list-style-type:disc">eg: reduce resolution for pan</li></ul><hr id="a8fca8f8-f4f3-44e6-833a-b3a453821c03"/><p id="65272689-3e09-461c-9e95-5a5e5f9e2a5a" class=""><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>Long Tasks</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><ul id="0756ad03-0301-4f35-9eeb-7c546b257366" class="bulleted-list"><li style="list-style-type:disc">keep UI responsive</li></ul><ul id="7eb969d0-b59e-4113-ba29-ee14829c5a93" class="bulleted-list"><li style="list-style-type:disc">progress feedback </li></ul><ul id="608105bf-0d3a-4605-a117-1ee0f2210f47" class="bulleted-list"><li style="list-style-type:disc">allow task to be paused/cancelled </li></ul><hr id="16ad1eeb-b8cf-4ae5-99db-d0f90a8fe33f"/><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0"><mark class="highlight-orange"><strong>Blocking (Demo) </strong></mark></summary><div class="indented"><ul id="e871ad88-5d6c-4053-9cc5-208fe6ee67d7" class="bulleted-list"><li style="list-style-type:disc">UI is blocked while a long task finishes </li></ul><ul id="f4033580-9348-47c5-8ac8-bbd6faeac5b2" class="bulleted-list"><li style="list-style-type:disc">function (setup) has to start and end for the next frame to render </li></ul></div></details><hr id="c266f7af-32e3-4097-a517-120492a8c295"/><p id="9038f23f-325f-49b7-8a3f-7f06b9fefc63" class=""><strong><strong><strong><strong><strong><strong><strong><strong><strong>Multi-Threading</strong></strong></strong></strong></strong></strong></strong></strong></strong></p><ul id="2ab6d951-e539-41e5-b90d-62422a75f3e6" class="bulleted-list"><li style="list-style-type:disc">reduces blocking </li></ul><ul id="1c3157db-0576-496e-9a14-adbb36c5473b" class="bulleted-list"><li style="list-style-type:disc">concurrency risks: two threads updating a variable </li></ul><ul id="5da1321e-819a-4c46-958f-985151f89d7f" class="bulleted-list"><li style="list-style-type:disc">Browsers support <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>worker threads</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><ul id="15a4458d-8dc9-4b6b-8ce0-28b3f99ee1e2" class="bulleted-list"><li style="list-style-type:circle"><strong>dedicated workers </strong>(most common)</li></ul><ul id="3768c6ba-cda8-4a9f-a424-111720bd13ab" class="bulleted-list"><li style="list-style-type:circle">shared workers</li></ul><ul id="05dad3a5-fb83-441c-9e7f-4c7c5e4783c0" class="bulleted-list"><li style="list-style-type:circle">service workers </li></ul></li></ul><hr id="8fad9719-9d9a-4f3f-9a15-76c2abdb1e75"/><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0"><mark class="highlight-orange"><strong>Worker (Demo) </strong></mark></summary><div class="indented"><ul id="6166f2bd-75b2-4c87-931e-c237a351222c" class="bulleted-list"><li style="list-style-type:disc">long task is done on a worker thread </li></ul><ul id="8b52a816-5b82-4a1e-893a-ba41bc51a979" class="bulleted-list"><li style="list-style-type:disc">UI is not blocked and we can have a progress bar that updates</li></ul><ul id="76305c18-8a61-49c9-b82f-c8268946b254" class="bulleted-list"><li style="list-style-type:disc">html: <code>&lt;progress&gt;</code> tag</li></ul><ul id="b9f877a6-79d2-4cd0-8697-6a1a1a1fd305" class="bulleted-list"><li style="list-style-type:disc">main: <code>new Worker(new URL(&quot;./generate.ts&quot;, import.meta.url)); </code><ul id="58f30366-1cb1-47a3-ae67-3c27cb4bcd7c" class="bulleted-list"><li style="list-style-type:circle"><code>&quot;./generate.ts&quot;</code> : code to run while thread runs </li></ul></li></ul><ul id="633f43ad-cbbf-4636-9692-4e35457cd438" class="bulleted-list"><li style="list-style-type:disc">instead of calling the long task function, <code>generate()</code>, you do: <code>worker.postMessage(command: &quot;generate&quot;, ...)</code><ul id="40d62cbe-2187-47f1-ae4c-7a07aee03f88" class="bulleted-list"><li style="list-style-type:circle">then you have to tell worker what to do with a <em>‚Äúgenerate‚Äù </em>message (<code>worker.addEventListener(&quot;message&quot;, ...)</code>) </li></ul></li></ul><ul id="302dd675-53d0-4fd8-b286-15f8b8b37c6d" class="bulleted-list"><li style="list-style-type:disc">the worker thread can do <code>postMessage()</code> to send to the main thread </li></ul></div></details><hr id="12923d73-5b50-4bbe-a12f-f231506349bf"/><p id="ecaecd07-6753-4cde-a006-31a311e86fce" class=""><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>Fetch API </strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p><ul id="5fc67a7e-b825-4d0e-9eac-eec702cf5fd8" class="bulleted-list"><li style="list-style-type:disc">interface for fetching resources across the web </li></ul><ul id="2da90a03-3e65-4eb5-b3ac-c5d7d8bf4c66" class="bulleted-list"><li style="list-style-type:disc">Global <code>fetch(url)</code> function<ul id="dcc576ef-62fc-478a-bd05-24f0594e21e0" class="bulleted-list"><li style="list-style-type:circle">starts the process of fetching from the network, returning <code>Promise</code><strong><strong><strong><strong><strong><strong><strong><strong> </strong></strong></strong></strong></strong></strong></strong></strong>which is fulfilled once response is available </li></ul></li></ul><ul id="419edf53-5d1e-4dfe-adc0-c212ad430cc2" class="bulleted-list"><li style="list-style-type:disc">Response object: JSON, handling errors </li></ul><hr id="b94e97fb-e406-460f-a5a6-a8857fc158a6"/><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0"><mark class="highlight-orange"><strong>Fetch (Demo) </strong></mark></summary><div class="indented"><ul id="744cdca6-dff5-4b6a-a6fc-758c82bc33ca" class="bulleted-list"><li style="list-style-type:disc">get‚Äôs JSON data from different API‚Äôs through the network</li></ul><ul id="ae21a1f7-3498-4ba8-a2cb-e3e17ac96f28" class="bulleted-list"><li style="list-style-type:disc">displays ‚ÄúFetching‚Äù while the <em>Promise</em> is being fulfilled </li></ul><pre id="5db6e941-43f3-4156-80d8-de2fd4d36a34" class="code"><code>spinner.style.display = &quot;flex&quot; //show it

fetch(url).then(
	(response) =&gt; response.json(), //success
	(reason) -&gt; console.error(reason); //error
) //once this primise is fullfilled...
.then(
	(data) -&gt; (results.innerText = JSON.stringify(data, null, 2))
)
.then(
	() =&gt; spinner.style.display = &quot;none&quot; //hide it
); </code></pre><p id="5921decb-bc3d-4793-b89c-23f7e27ee13b" class="">
</p></div></details></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>